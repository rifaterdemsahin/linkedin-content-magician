# üî¥ Chrome Extension Content Security Policy (CSP) Error

**Date:** October 25, 2025
**Error Source:** Chrome Extension
**Error Type:** Content Security Policy Violation
**Severity:** Medium - Application Security/Functionality Issue

## üìú Error Description

Chrome extension is blocking the execution of dynamically generated scripts from GitHub Pages due to CSP restrictions.

## üìã Error Details

### Console Error Message

    content.js:148 Refused to load the script 'blob:https://rifaterdemsahin.github.io/2cf6c929-93a8-43c4-8a7e-1211c73390d0' because it violates the following Content Security Policy directive: "script-src 'self' 'wasm-unsafe-eval' 'inline-speculation-rules' chrome-extension://b703cb16-9dfa-4e30-9070-f68e4b22d9ed/". Note that 'script-src-elem' was not explicitly set, so 'script-src' is used as a fallback.

### Error Analysis

*   **File:** `content.js` line 148
*   **Blocked Resource:** `blob:https://rifaterdemsahin.github.io/2cf6c929-93a8-43c4-8a7e-1211c73390d0`
*   **Chrome Extension ID:** `b703cb16-9dfa-4e30-9070-f68e4b22d9ed`
*   **CSP Directive:** `script-src 'self' 'wasm-unsafe-eval' 'inline-speculation-rules'`

## ü§î Root Cause Analysis

### 1. Blob URL Script Generation

The application is attempting to load a script from a blob URL, which is a dynamically generated script content stored in browser memory.

### 2. Chrome Extension CSP Restriction

The Chrome extension has a strict Content Security Policy that:

*   Only allows scripts from `'self'` (same origin)
*   Permits `'wasm-unsafe-eval'` for WebAssembly
*   Allows `'inline-speculation-rules'` for prefetching
*   **Does NOT allow blob URLs** for script execution

### 3. Potential Script Sources

The blob URL script could be generated by:

*   React development tools
*   Vite's hot module replacement (HMR)
*   Dynamic import() statements
*   Web Workers
*   Service Workers
*   Third-party libraries creating dynamic scripts

## üìà Impact Assessment

### Current Impact

*   Chrome extension functionality may be limited
*   Possible JavaScript execution blocking
*   Development/debugging tools may not work properly
*   User experience degradation in Chrome with the extension

### Potential Consequences

*   Application features dependent on dynamic scripts may fail
*   Performance monitoring tools might not function
*   Development workflow interruption
*   User reports of broken functionality

## üïµÔ∏è Investigation Steps

### 1. Identify Script Source

Need to determine what is generating the blob URL script:

```javascript
// Check for dynamic imports
// Check for Worker constructors
// Check for service worker registrations
// Check for eval() or Function() usage
```

### 2. Chrome Extension Details

*   **Extension ID:** `b703cb16-9dfa-4e30-9070-f68e4b22d9ed`
*   **Need to identify:** Extension name and purpose
*   **Check:** Extension manifest.json for CSP settings

### 3. Application Code Review

Examine the application for:

*   Dynamic script generation
*   Web Worker usage
*   Service Worker implementation
*   Third-party library blob URL usage

## üí° Potential Solutions

### Option 1: Modify Application Code

*   Remove or replace blob URL script generation
*   Use static scripts instead of dynamic ones
*   Implement alternative approaches for dynamic functionality

### Option 2: Chrome Extension Configuration

*   Update extension's CSP to allow blob URLs (if controllable)
*   Add `'unsafe-inline'` or `blob:` to script-src directive
*   Configure extension permissions

### Option 3: Alternative Approaches

*   Use data URLs instead of blob URLs
*   Implement server-side script generation
*   Use message passing instead of direct script injection

## üöÄ Recommended Actions

### Immediate

1.  **Identify Extension:** Determine what Chrome extension is causing the issue
2.  **Review Application:** Check for blob URL generation in the codebase
3.  **Test Without Extension:** Verify application works without the extension

### Short-term

1.  **Code Analysis:** Examine React/Vite build output for blob URL usage
2.  **CSP Headers:** Review application's own CSP settings
3.  **Alternative Implementation:** Consider removing blob URL dependencies

### Long-term

1.  **Security Review:** Ensure application follows CSP best practices
2.  **Extension Compatibility:** Document known extension conflicts
3.  **User Guidelines:** Provide instructions for users with conflicting extensions

## üõ†Ô∏è Technical Details

### CSP Directive Breakdown

    script-src 'self' 'wasm-unsafe-eval' 'inline-speculation-rules' chrome-extension://...

*   `'self'`: Same-origin scripts only
*   `'wasm-unsafe-eval'`: WebAssembly evaluation allowed
*   `'inline-speculation-rules'`: Prefetching rules allowed
*   `chrome-extension://...`: Extension-specific scripts allowed

### Missing Allowances

*   `blob:` - Blob URL scripts (BLOCKED)
*   `'unsafe-inline'` - Inline scripts (BLOCKED)
*   `'unsafe-eval'` - Dynamic code evaluation (BLOCKED)

## üìÇ Files to Investigate

*   `content.js` (line 148) - Where the error occurs
*   Application's CSP headers
*   Chrome extension manifest
*   Vite/React build configuration
*   Any Web Worker or Service Worker files

## üìä Monitoring

*   Track occurrence frequency
*   Monitor user reports
*   Check if error affects application functionality
*   Document browser/extension version compatibility

---

**Status:** Under Investigation
**Priority:** Medium
**Next Action:** Identify extension and blob URL source
**Requires:** Code review and extension analysis
